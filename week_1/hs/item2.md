# 아이템1. 생성자에 매개변수가 많다면 빌더를 고려하라.

정적 팩터리와 생성자는 모두 선택적인 매개변수가 많을때 적절히 대응하기 어렵다.

## 해결책 1. 생성자

- 예를들어
    - 필수 매개변수와 선택 매개변수 1개를 받는 생성자, 선택 매개변수 2개까지 받는 생성자... 선택적 매개변수 모두 받는 생성자 등등 모두 생성해야한다.
- 단점
    - 작성하고, 읽기 어려움
    - 만약 사용자가 설정하길 원치 않는 매개변수까지 포함되어 있어도 어쩔수없이 값을 설정해줘야함.
    - 등등
    

## 해결책 2. 자바빈즈 패턴(JavaBeans pattern)


매개변수가 없는 생성자로 객체를 만든 후, setter 메서드들을 호출해 원하는 매개변수의 값을 설정하는 방식이다.
```java
NutritionFacts cocaCola = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setServings(8); //(1)
cocaCola.setCalories(100);
cocaCola.setSodium(35);
```


- 장점
  - 앞선 생성자의 단점 해결. 인스턴스를 만들기 쉽고, 생성자 방식보단 읽기 쉬운 코드 
- 단점
  - 객체 하나를 만들려면 메서드를 여러개 호출해야함
  - 객체 완성되기전 자바빈이 중간에 사용되는 경우 안정적이지 않은 상태로 사용될 여지가 있다.
      - 예를들어서 (1)에서 객체 사용하는경
  - getter, setter가 있어서 불변 클래스를 만들지 못함.
  - **(이해안감)** (쓰레드 간에 공유 가능한 상태가 있으니까) 스레드 안정성 얻으려면 추가적인 수고(locking)필요하다.
  

## 해결책 3. 빌더 패턴 (Builder pattern)

1. 필요한 객체를 직접 생성자(or 정적 팩터리)를 호출해 빌더 객체를 얻는다.   
2. 빌더 객체가 제공하는 setter로 선택 매개변수를 설정한다.
    - setter 메서드는 자신(this)을 반환하기 때문에 연쇄적 호출 가능
3. build 메서드를 호출해서 필요한 객체를 얻는다.

```java
NutritionFacts cocaCola = new NutritionFacts.Builder(240, 8)
.calories(100).sodium(35).carbohydrate(27).build();
```


- 빌더패턴은 **유효성 확인 할수 있다.**
  - (최대한 일찍 발견하려면) 각 빌더 생성자와 메서드에서 수행
  - build 메서드가 호출하는 생성자에서 여러 매개변수에 걸친 불변식 검사.

- 빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기 좋다.
 

- 단점 
  - 빌더 생성 비용이 크지는 않지만 성능에 민감하면 문제가될 수도 있다.
  - 점층적 생성자 패턴보다는 코드가 장황해져서 매개변수가 4개 이상은 되어야 값어치함
    - 하지만 시간이 지날수록 매개변수는 증가하는걸 고려하자.


