# Item 21 인터페이스는 구현하는 쪽으로 생각해 설계하라

Java8 이전에는 기존 구현체를 깨트리지 않고서는 새로운 메서드를 추가할 방법이 없었다. 인터페이스에 메서드를 추가하게 되면 컴파일 에러가 발생했다. 하지만 자바 8이후 디폴트메서드가 생기며 새로운 메서드를 구현체를 깨트리지 않고 추가할 수 있게 되었지만 여전히 위험성은 남아있다. 왜냐하면 따로 구현체를 건드리지 않으면 하위 클래스들은 모두 디폴트 메서드에 종속되게 되며 Java 8이전의 코드들은 인터페이스의 규약을 반드시 맞출 것이라고 가정하고 짰기 때문에 레거시 코드에서 문제가 발생할 수 있다. 

*__대다수의 인터페이스에서의 디폴트 메서드는 람다식을 사용하기 위해 추가되었다.__*

Collection 인터페이스에 추가된 removeIf 메서드의 경우 굉장히 범용적으로 잘 구현되어 있지만 모든 Collection의 구현체와 어울리지는 않는다. 대표적으로 SynchronizedCollection이 있다. 이것은 객체를 락을 거는 기능을 추가하였는데, 이 Collection은 removeIf 함수를 재정의를 하지 않았기 때문에 디폴트 메서드를 사용하게 되며 이때 스레드에서 접근하는 상황에서 removeIf 메서드를 호출하는 경우에는 문제가 생길 수 있다.

*__디폴트 메서드는 (컴파일에 성공하더라도) 기존 구현체에 런타임 오류를 일으킬 수 있다__*

이런식으로 인터페이스가 변경되는 경우에 굉장히 많은 클라이언트의 영향을 끼칠 수 있으며 디폴트 메서드로 선언을 해놓을 경우 그 영향도를 파악하기 쉽지 않다. 따라서, 인터페이스를 설계할때에는 세심한 주의를 요하며 이왕이면 인터페이스는 *__메서드들을 직접 구현하는 쪽으로 생각하고 설계하는것이 났다__*

