# item49 매개변수가 유효한지 검사하라

## 오류는 가능한한 빠르게 잡자

메서드가 실행되기 전에 매개변수가 올 때부터 잡는 것이 좋다.

1. 메서드가 수행되는 중간에 모호한 예외를 던지며 메서드가 잘 수행됐는데 그 결과가 잘못되는 것은 최악이다.
2. 메서드는 문제 없으나 어떤 객체의 상태를 이상하게 바꾸는 경우는 더 더 최악이다.

따라서 문서화를 통해서 매개변수가 제약을 어겼을때 발생시키는 예외를 함께 기술해 놓자.



## 검사방법

### Java7

java.util.Objects.requireNonNull메서드는 유연하고 사용하기 편하기 때문에 null검사를 수동으로 하지 않아도 된다.

```java
this.strategy = Objects.requirenonNull(stratege,"전략")
```

어디서든 Null검사로 사용해도 된다.

### Java9

Objects에 범위 검사 메서드가 추가되었다.

- checkFromIndexSize
- checkFromToIndex
- checkIndex

그러나 null검사 메서드만큼 유연하지 않다. 예외 메세지를 적용할 수 없고 배열 전용으로 설계 됐으며 닫힌 범위에서는 다루지 못한다.

하지만 저러한 제약조건들이 없으면 사용해도 좋다.



### 공개되지 않은 메서드

assert를 사용해서 단언문으로 매개변수의 유효성을 검증해준다.

하지만 일반적인 유효성 검사와는 다르다.

1. 실패하면 AssertError를 던진다.
2. 런타임에 아무런 효과도 성능 저하도 존재하지 않는다.



## 예외

유효성 검사의 비용이 비교적 지나치게 크고 실용적이지 않을때, 계산중에 암묵적으로 검사가 수행되는 경우는 매개변수의 유효성 검사를 하지 않아도 된다.

예를들어 Collections.sort의 경우는 상호 비교가 안되는 경우 예외를 던지며, 이전에 다 검사를 하는 것은 비용이 너무 크다.



## 결론

매개 변수에 제약사항을 두라는 것은 아니며 오히려 범용적으로 설계하는 편이 낫다. 하지만 메서드가 실행되기 전에 찾아내는 것이 좋다.