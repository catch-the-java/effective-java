# item 64 객체는 인터페이스를 사용해 참조하라

## 앞선 내용

앞선 내용에 매개변수 타입으로 클래스가 아니라 인터페이스를 사용하라고 했다.

이는 참조에서도 마찬가지이다.

그 이유는 프로그램이 훨씬 유연해 지기 때문이다.

```java
Set<Son> sonSet = new ListedHashSet<>(); //good
ListedHashSet<Son> linkedSet = new ListedHashSet<>();//bad
```

위 코드에서 구체 클라스를 바꾸고 싶다면 good 케이스의 경우는 쉽게 바뀐다.

```java
Set<Son> sonSet = new HashSet<>();
```

  

## 한계점

하지만 만약 구체 클래스에서만 제공하는 메서드 또는 기능이 있다면 반드시 구체 클래스를 이용해 기능을 제공해야한다.

예를들어 ListkedHashSet의 경우는 순서를 보장하지만 HashSet의 경우는 순서를 보장하지 않기 때문에 이러한 특징을 알고 사용해야 한다.



## 타입 교체시

선언 타입과 구현 타입을 동시에 바꿀 수 있으니 구체 클래스로 선언해도 될 것이라 생각되겠지만 클라이언트에서 기존에만 동작하는 인스턴스를 넘긴다면 문제가 생길 수 있다.

하지만 인터페이스 타입으로 선언하면 이런 일은 발생하지 않는다.

그리고 적합한 인터페이스가 없다면 당연히 클래스를 참조하면 된다. 이런 경우는 다음과 같다.

1. BigInteger, String과 같은 값 클래스. -> 여러가지로 구현될 수 있다고 생각하고 구현하지 않기 때문
2. 클래스 기반으로 작성된 프레임워크가 제공하는 객체들.(OutputStream 등 java.io 패키지의 여러 클래스가 이 부류에 속한다.)
3. 인터페이스에는 없는 특별한 메서드를 제공하는 경우.(PriorityQueue에서는 Queue에는 없는 comparator 메서드를 제공한다.)